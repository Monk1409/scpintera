<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">      
    <h:head>  
        <h:outputStylesheet library="css" name="skins.css"/>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"></link>
    </h:head>
    <style type="text/css">
        .test{ display: flex; margin-bottom: 30px; }
    </style>   
    <h:body>   
        <h:form id="datos" enctype="multipart/form-data">
            <p:panel header="Perfil de la organización">  
                <p:commandButton value="Revisar solicitud" icon="fa fa-check-square-o" type="button" onclick="PF('dlg').show();" rendered="#{perfilUser.aplicaPerfil}"/>
                <p:spacer width="25" height="10"/><br/><br/>
                <p:wizard flowListener="#{perfilUser.onFlowProcess}" backLabel="Regresar" nextLabel="Siguiente">
                    <p:tab id="personal" title="Generales" titleStyle="font-size: small;">
                        <p:panel header="Generales">
                            <p:outputPanel id="opGral" style="overflow: auto; height: 400px">
                                <p:messages />
                                <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;">
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Nombre de la organización:" />
                                        </p:column>
                                        <p:column colspan="3">
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.nombreOrganizacion}" 
                                                         required="true" requiredMessage="Por favor escriba el nombre de su organización."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Calle:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.calle}" 
                                                         required="true" requiredMessage="Por favor escriba un nombre de calle."/>
                                        </p:column>
                                        <p:column>
                                            <h:outputText value="* Número: " />
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.numero}" 
                                                         required="true" requiredMessage="Por favor escriba un número."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Código Postal:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="cp" value="#{perfilUser.perfilDatosGenerales.cp}" 
                                                         required="true" requiredMessage="Por favor escriba el código postal."/>
                                            <p:spacer width="10"/>
                                            <!--p:commandButton id="buscar" widgetVar="wvBuscar" icon="ui-icon-search" title="Buscar Código Postal"
                                                             update="cp colonia ciudad estado pais"
                                                             onclick="PF('bloqueo').show();"
                                                             action="{perfilUser.abrirVentana}">
                                            </p:commandButton-->
                                        </p:column>
                                        <p:column>
                                            <h:outputText value="* Colonia:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="colonia" value="#{perfilUser.perfilDatosGenerales.colonia}" 
                                                         required="true" requiredMessage="Por favor escriba la colonia."/>
                                            <p:spacer width="10"/>
                                            <!--p:commandButton id="buscarColonia" widgetVar="wvBuscar2" icon="ui-icon-search" title="Buscar Colonia"
                                                             update="cp colonia ciudad estado pais"
                                                             onclick="PF('bloqueo').show();"
                                                             action="{perfilUser.abrirVentana}">
                                            </p:commandButton-->
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Ciudad:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="ciudad" value="#{perfilUser.perfilDatosGenerales.ciudad}" 
                                                         required="true" requiredMessage="Por favor escriba la ciudad."/>
                                        </p:column>
                                        <p:column>
                                            <h:outputText value="* Estado:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="estado" value="#{perfilUser.perfilDatosGenerales.estado}" 
                                                         required="true" requiredMessage="Por favor escriba el estado."/>
                                        </p:column>
                                    </p:row> 
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* País: " />
                                        </p:column>
                                        <p:column colspan="3">
                                            <p:inputText id="pais" value="#{perfilUser.perfilDatosGenerales.pais}" 
                                                         required="true" requiredMessage="Por favor escriba el país."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Teléfono:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.telefono}" 
                                                         required="true" requiredMessage="Por favor escriba el teléfono."/>
                                        </p:column>
                                        <p:column>
                                            <h:outputText value="Fax:" />
                                        </p:column>
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.fax}"/>
                                        </p:column>
                                    </p:row>             
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Contacto: " />
                                        </p:column>                                
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.contacto1}" 
                                                         required="true" requiredMessage="Por favor escriba un nombre de contacto."/>
                                        </p:column>
                                        <p:column rowspan="2">
                                            <h:outputText value="* Cargo/Área:" />                                         
                                        </p:column> 
                                        <p:column rowspan="2">
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.cargo1}" 
                                                         required="true" requiredMessage="Por favor escriba el cargo o el área."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="* Email:" />
                                        </p:column>                                
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.email1}" 
                                                         required="true" requiredMessage="Por favor escriba un email."
                                                         validatorMessage="Correo electrónico inválido.">
                                                <f:validateRegex pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
                                            </p:inputText>
                                        </p:column>                                          
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="Contacto Adicional:" />
                                        </p:column>                                
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.contacto2}" />
                                        </p:column>
                                        <p:column rowspan="2">
                                            <h:outputText value="Cargo/Área:" />                                         
                                        </p:column> 
                                        <p:column rowspan="2">
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.cargo2}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <h:outputText value="Email Adicional:" />
                                        </p:column>                                
                                        <p:column>
                                            <p:inputText value="#{perfilUser.perfilDatosGenerales.email2}" />
                                        </p:column>                                          
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <p:tab id="actividad" title="Actividad Operativa" titleStyle="font-size: small;">                        
                        <p:panel header="Actividad Operativa">
                            <p:outputPanel id="opActOp" style="overflow: auto; height: 400px">
                                <p:messages />
                                <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Indique el Alcance del Sistema de Gestión de calidad indicado en su manual de Calidad:"/>
                                            <p:spacer width="10"/>
                                            <p:outputLabel style="font-size: x-small" value="(Ver ejemplo en Anexo 1)"/>
                                            <p:spacer width="10"/>
                                            <p:commandButton icon="fa fa-question-circle" value="Anexo 1" title="Ver ejemplo" onclick="PF('dlgAnexo1').show();"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:inputText id="alcance" value="#{perfilUser.perfilActividadOper.alcance}" 
                                                         required="true" requiredMessage="Por favor indique el alcance del sistema de gestión de calidad."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Indique el/los producto(s)/servicio(s) o bien familias de productos, 
                                                           que realiza la organización que entran dentro del alcance de certificación:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:inputText id="producto" value="#{perfilUser.perfilActividadOper.productoServicio}"/>                                        
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="De el/los producto(s)/servicio(s) indicados anteriormente favor de señalar los procesos/servicios 
                                                           o bien líneas de producción que intervienen para su ejecución. Anexar el/los diagrama(s) de flujo:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:dataTable id="productos" emptyMessage="No se han agregado procesos, servicios o líneas de producción."                                                         
                                                         value="#{perfilUser.listaActividadPer}" var="prod" rowKey="#{prod.key}" style="text-align: center">
                                                <f:facet name="header">
                                                    <p:commandButton id="agregarProceso" title="Agregar procesos/servicios o líneas de producción"
                                                                     onclick="PF('bloqueo').show();" immediate="true" 
                                                                     update="datos:opActOp" ajax="true"
                                                                     action="#{perfilUser.agregarProdSer}"
                                                                     oncomplete="PF('bloqueo').hide();"
                                                                     icon="fa fa-plus-square"/> 
                                                </f:facet>
                                                <p:column headerText="Procesos/Servicios/Líneas de producción">
                                                    <p:inputText value="#{prod.producto}"/>
                                                </p:column>
                                                <p:column headerText="Breve descripción del Proceso/Servicio o Líneas de producción actividades realizadas">
                                                    <p:inputText value="#{prod.descripcion}"/>
                                                </p:column>
                                                <p:column headerText="Turnos y horarios">
                                                    <p:inputText value="#{prod.turnoHorario}"/>
                                                </p:column>
                                                <p:column headerText="Opciones">
                                                    <p:commandButton icon="ui-icon-close" title="Eliminar" action="#{perfilUser.eliminarProdSer}"
                                                                     update="datos:productos">
                                                        <f:setPropertyActionListener value="#{prod}" target="#{perfilUser.seleccionadoAct}"/>
                                                    </p:commandButton>
                                                </p:column>
                                            </p:dataTable>
                                            <p:spacer width="10" height="20"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>                                        
                                            <p:outputLabel value="* De acuerdo con la información indicada anteriormente en relación a los procesos, productos o servicios,
                                                           ¿En cuál de los siguientes rubros su organización opera? (Puede ser más de un rubro):"/>
                                            <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                                <p:row>
                                                    <p:column>
                                                        <p:selectManyCheckbox id="rubros" required="true" 
                                                                              requiredMessage="Por favor indica al menos un rubro en el que opera su organización."
                                                                              layout="grid" columns="1" value="#{perfilUser.valorChk}">
                                                            <f:selectItem itemLabel="Producción/Servicio: Estacional/Temporal Porque?" itemValue="1" />
                                                            <f:selectItem itemLabel="Producción/Servicio: Continúo Porque?" itemValue="2"/>
                                                            <f:selectItem itemLabel="Producción/Servicio: Por proyecto Porque?" itemValue="3"/>                                                            
                                                        </p:selectManyCheckbox>
                                                        <p:outputLabel styleClass="test2" style="font-size: x-small" value="Ejemplo Empresas en las que su servicio/producción están relacionadas a ciertas tendencias 
                                                                       ya sea por una afectación geográfica, aspectos climáticos, modas, etc. Tal es el caso de empresas dedicadas al sector agrícola
                                                                       o bien empresas dedicadas a la confección de ropa."/>
                                                        <p:outputLabel styleClass="test2" style="font-size: x-small" value="Ejemplo: Empresas que trabajan bajo producción u órdenes de trabajo establecidas como el maquinado 
                                                                       de piezas."/>                                                    
                                                        <p:outputLabel styleClass="test2" style="font-size: x-small" value="Ejemplo: Empresas dedicadas a la construcción, despachos de consultoría que trabajan por proyectos
                                                                       específicos."/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column>
                                                        <p:spacer width="10" height="10"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column>
                                                        <p:outputLabel value="* Favor de indicar de acuerdo a los casilleros marcados, ¿Cuándo se presenta 
                                                                       la mayor producción o servicio en donde mejor se refleje el alcance total de 
                                                                       certificación?:"/>
                                                        <p:spacer width="10"/>
                                                        <p:outputLabel style="font-size: x-small" value="(Pudiendo considerar lo siguiente: mayor producción, 
                                                                       la aplicación del mayor número de líneas de producción o bien procesos de 
                                                                       producción/servicio, número de proyectos, etc.)"/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column>
                                                        <p:inputText id="mayorProd" value="#{perfilUser.perfilActividadOper.mayorProd}"
                                                                     required="true" requiredMessage="Por favor indique cuándo se presenta la mayor producción o servicio."/>
                                                    </p:column>
                                                </p:row>
                                                <p:row>
                                                    <p:column>     
                                                        <p:outputLabel style="font-size: x-small" value="Nota: La información proporcionada será reflejada en 
                                                                       un programa de auditoría con el fin de demostrar el alcance total de certificación definida por su organización."/>
                                                    </p:column>
                                                </p:row>
                                            </p:panelGrid>
                                        </p:column>
                                        <script type="text/javascript">
                                            //$('#datos\\:rubros > tbody > tr').addClass('test');                                            
                                        </script>
                                    </p:row>
                                </p:panelGrid>
                                <p:dialog header="ANEXO 1" widgetVar="dlgAnexo1" modal="true" resizable="false">
                                    <h:graphicImage url="../../../../Librerias/Imagenes/Base/Anexo1.png" width="90%" height="70%"/>
                                </p:dialog> 
                            </p:outputPanel>  
                        </p:panel>                                              
                    </p:tab>
                    <p:tab id="normativos" title="Normatividad" titleStyle="font-size: small;">
                        <p:panel header="Requerimientos normativos">
                            <p:outputPanel id="opReqNor" style="overflow: auto; height: 400px">
                                <p:messages />
                                <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="¿Se requiere algún equipo de protección personal para la visita de auditoría que usted no pueda proporcionar?"/>
                                            <p:outputLabel style="font-size: x-small" value="(En caso afirmativo indique cuál)"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:inputText id="proteccion" value="#{perfilUser.perfilNormatividad.equipoProteccion}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="¿Realiza transacciones comerciales/operaciones bajo otro nombre?"/>
                                            <p:outputLabel style="font-size: x-small" value="(En caso afirmativo indique cuál)"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>                                    
                                        <p:column>
                                            <p:inputText id="bajoOtroNombre" value="#{perfilUser.perfilNormatividad.transOtroNombre}" />
                                        </p:column>
                                    </p:row> 
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene la empresa varios locales o sucursales que quiere usted que participen en la certificación (organización multisitios)?"/>
                                            <p:spacer width="10"/>
                                            <p:selectOneRadio id="confirmaSucursal" value="#{perfilUser.perfilNormatividad.tieneLocalesCer}"
                                                              required="true" requiredMessage="Por favor indica si la empresa tiene varios locales o sucursales."
                                                              onclick="validaCheck(this)">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                            <p:outputLabel value="En caso de ser afirmativo favor de indicar los sitios en el Anexo 2."/><p:spacer width="10"/>
                                            <a href="#datos:multisitios" title="Ir al Anexo 2" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left">
                                                <span class="ui-button-icon-left ui-icon ui-c fa fa-arrow-circle-right"></span><span class="ui-button-text ui-c">Anexo 2</span></a>
                                            <p:spacer width="10"/>                                        
                                            <br/>
                                            <p:outputLabel style="font-size: x-small" value="(Está definida como la organización que tiene identificada la función central (en lo sucesivo referido 
                                                           como oficina central-pero no necesariamente la oficina matriz de la organización) en el cual algunas actividades son planeadas, controladas
                                                           o dirigidas a toda la red de oficinas locales o sucursales (sitios) en las cuales estas actividades se llevan a cabo de manera completa
                                                           o parcial)"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column style="width: 50%">
                                            <p:outputLabel value="¿Es su empresa subsidiaria de otra compañía más grande?"/>
                                            <p:outputLabel style="font-size: x-small" value="(En caso afirmativo indique cuál)"/>
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>                                        
                                            <p:inputText id="subsidiaria" value="#{perfilUser.perfilNormatividad.subsidiaria}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="¿Su organización realiza actividades en sitios temporales que estén considerando en la certificación?"/><p:spacer width="10"/>
                                            <p:selectOneRadio id="confirmaTemporales" value="#{perfilUser.perfilNormatividad.actividadTemp}"
                                                              required="true" requiredMessage="Por favor indica si la organización realiza actividades en sitios temporales."
                                                              onclick="validaCheck(this)">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                            <p:outputLabel value="En caso de ser afirmativo favor de indicar los sitios en el Anexo 2."/><p:spacer width="10"/>
                                            <a href="#datos:multisitios" title="Ir al Anexo 2" class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-left">
                                                <span class="ui-button-icon-left ui-icon ui-c fa fa-arrow-circle-right"></span><span class="ui-button-text ui-c">Anexo 2</span></a>
                                            <p:spacer width="10"/> 
                                            <br/>
                                            <p:outputLabel style="font-size: x-small" value="(Está establecido por la organización para llevar a cabo un trabajo específico 
                                                           o servicio por un periodo finito de tiempo y el cual no deberá ser un sitio permanente (ejemplo sitios de construcción)."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Enumere productos o servicios que no desee incluir en la certificación."/>                                        
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>                                        
                                            <p:inputText id="noincluir" value="#{perfilUser.perfilNormatividad.prodSerNoIncluir}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Favor de indicar la Normatividad aplicable a su giro o sector 
                                                           industrial. (Ejemplo: Leyes, Códigos, Reglamentos, Normas oficiales 
                                                           mexicanas NOM´s)."/>                                        
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>                                        
                                            <p:inputText id="normatividad" value="#{perfilUser.perfilNormatividad.normaGiro}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Se realizan operaciones en locales del cliente?"/>                                        
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>
                                            <p:selectOneRadio id="locales" value="#{perfilUser.perfilNormatividad.operacionLocal}"
                                                              required="true" requiredMessage="Por favor indica si se realizan operaciones en locales del cliente.">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="Mencione los recursos técnicos necesarios en la operación de la 
                                                           organización. (Ejemplo: Software, equipos especializados, herramientas, etc.)"/>                                        
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>                                        
                                            <p:inputText id="recursos" value="#{perfilUser.perfilNormatividad.recursosTecnicos}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Mencione los procesos y/o servicios contratados externamente 
                                                           que se encuentren dentro del alcance del sistema de calidad (Ejemplo:
                                                           Servicio de transporte, Equipos de producción sub contratados, Calibración de Instrumentos
                                                           de medición, Servicio de fumigación y control de fauna nociva y almacenaje y distribución de 
                                                           Producto terminado, Sistemas informáticos)."/>                                        
                                        </p:column>
                                    </p:row>                
                                    <p:row>                                    
                                        <p:column>                                        
                                            <p:inputText id="subcontratos" value="#{perfilUser.perfilNormatividad.prodSerExterno}" 
                                                         required="true" requiredMessage="Por favor indica los procesos y/o servicios contratados externamente."/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="20"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:dataTable id="multisitios" var="multi" rowKey="#{multi.key}"
                                                         value="#{perfilUser.listaMultisitios}" 
                                                         emptyMessage="No se han agregado multisitios."
                                                         style="text-align: center">
                                                <f:facet name="header">
                                                    <p:commandButton id="agregarMultisitios" title="Agregar multisitios"
                                                                     onclick="PF('bloqueo').show();" immediate="true"
                                                                     action="#{perfilUser.agregarMultiSitio}"
                                                                     oncomplete="PF('bloqueo').hide();"
                                                                     update="datos:opReqNor"
                                                                     icon="fa fa-plus-square" style="float: left;"/>
                                                    Anexo 2. <br/> Organización Multisitios                                                
                                                </f:facet>
                                                <p:column headerText="Nombre y dirección">
                                                    <p:inputText value="#{multi.nombreDireccion}"/>
                                                </p:column>
                                                <p:column headerText="Total de empleados">
                                                    <p:inputText value="#{multi.totalEmpleados}"/>
                                                </p:column>
                                                <p:column headerText="Turnos">
                                                    <p:selectManyCheckbox value="#{multi.selectedTurnos}" layout="grid" columns="1">
                                                        <f:selectItems value="#{multi.listaTurnos}" var="turnos"/>
                                                    </p:selectManyCheckbox>
                                                </p:column>
                                                <p:column headerText="Opciones">
                                                    <p:commandButton icon="ui-icon-close" title="Eliminar" action="#{perfilUser.eliminarMultiSitio}"
                                                                     update="datos:multisitios">
                                                        <f:setPropertyActionListener value="#{multi}" target="#{perfilUser.seleccionadoMulti}"/>
                                                    </p:commandButton>
                                                </p:column>
                                            </p:dataTable>
                                            <p:spacer width="10" height="20"/>
                                        </p:column>                                    
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <p:tab id="empleados" title="Empleados" titleStyle="font-size: small;">
                        <p:panel header="Empleados">
                            <p:outputPanel id="opEmp" style="overflow: auto; height: 400px">
                                <p:messages />
                                <p:remoteCommand name="rc" action="#{perfilUser.calcula}" update="datos:opEmp"/>
                                <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Total de personal en la organización"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="totalPersonal" value="#{perfilUser.perfilEmpleadosOrg.totalEmpresa}" 
                                                         required="true" requiredMessage="Por favor indica el total de personal en la organización"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* Total del personal incluido dentro del alcance de la certificación del sistema de gestión de calidad"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="totalIncluido" value="#{perfilUser.perfilEmpleadosOrg.totalAlcance}" 
                                                         required="true" requiredMessage="Por favor indica el total del personal incluido dentro del alcance de la certificación del sistema de gestión de calidad"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:spacer width="10" height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Total de personal en el domicilio Matriz"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="totalDomicilio" value="#{perfilUser.perfilEmpleadosOrg.totalDomicilio}" 
                                                         required="true" requiredMessage="Por favor indica el total de personal en el domicilio Matriz"/>
                                        </p:column>
                                        <!--p:column>
                                            <p:outputLabel value="Total en producción/servicio (en este domicilio)"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="totalProd" onchange="rc();" value="{perfilUser.perfilEmpleadosOrg.totalProdSer}" />
                                        </p:column-->
                                        <!--/p:row>
                                        <p:row>
                                            <p:column colspan="4">
                                                <p:spacer width="10" height="10"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Total administrativos (en este domicilio)"/>
                                            </p:column>
                                            <p:column>
                                                <p:inputText id="totalAdmin" onchange="rc();" value="{perfilUser.perfilEmpleadosOrg.totalAdmin}" />
                                            </p:column>
                                            <p:column>
                                                <p:outputLabel value="Total en Diseño (sí aplica) (en este domicilio)"/>
                                            </p:column>
                                            <p:column>
                                                <p:inputText id="totalDisenio" onchange="rc();" value="{perfilUser.perfilEmpleadosOrg.totalDisenio}" />
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4">
                                                <p:spacer width="10" height="10"/>
                                            </p:column>
                                        </p:row>
                                        <p:row>
                                            <p:column>
                                                <p:outputLabel value="Total Calidad (en este domicilio)"/>
                                            </p:column>
                                            <p:column colspan="3">
                                                <p:inputText id="totalCalidad" onchange="rc();" value="{perfilUser.perfilEmpleadosOrg.totalCalidad}" />
                                            </p:column>                                    
                                        </p:row>
                                        <p:row>
                                            <p:column colspan="4">
                                                <p:spacer width="10" height="10"/>
                                            </p:column>
                                        </p:row>
                                        <p:row-->
                                        <p:column colspan="2">
                                            <p:outputLabel value="* Indique el sistema de turnos con los que opera la organización"/><!--, incluyendo los sitios remotos (cuando aplique).-->
                                            <br/><br/>
                                            <p:outputLabel value="Matriz:"/>
                                            <br/><br/>
                                            <p:selectManyCheckbox id="matrizTurnos" value="#{perfilUser.valorChk4}" layout="grid" columns="3"
                                                                  required="true" requiredMessage="Por favor indica el sistema de turnos con los que opera la organización">                                                        
                                                <f:selectItem itemLabel="Matutino" itemValue="1" />
                                                <f:selectItem itemLabel="Vespertino" itemValue="2" />
                                                <f:selectItem itemLabel="Nocturno" itemValue="3" />
                                            </p:selectManyCheckbox>
                                            <!--br/>
                                            <p:outputLabel value="Sitios remotos: Favor de especificar (si aplica)"/-->                                        
                                        </p:column>                                    
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <p:tab id="reqCertificacion" title="Certificación" titleStyle="font-size: small;">
                        <p:panel header="Requerimientos de certificación inicial">
                            <p:outputPanel id="opReqCer" style="overflow: auto; height: 400px">
                                <p:messages />
                                <p:panelGrid columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Cuentan con información documentada del SGC:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="informacionSGC" value="#{perfilUser.perfilCertificacion.informacionSgc}" 
                                                         required="true" requiredMessage="Por favor indica si se cuenta con información documentada del SGC"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* Indique el estándar que busca certificar:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="estandarCert" value="#{perfilUser.perfilCertificacion.estandarCertificar}" 
                                                         required="true" requiredMessage="Por favor indica el estándar que busca certificar"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:outputLabel value="¿Cuenta con algún software para la administración de su SGC? (si es afirmativo favor de especificar qué tipo de software es):"/>
                                        </p:column>
                                    </p:row>                                
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:inputText id="software" value="#{perfilUser.perfilCertificacion.softwareSgc}" />
                                        </p:column>                                    
                                    </p:row>                                
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Ha dirigido al menos una revisión por la Dirección?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="revision" value="#{perfilUser.perfilCertificacion.dirigirRevision}" 
                                                         required="true" requiredMessage="Por favor indica si ha dirigido al menos una revisión por la Dirección"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Ha realizado al menos un ciclo de auditoría interna?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="cicloAudi" value="#{perfilUser.perfilCertificacion.cicloAuditoria}" 
                                                         required="true" requiredMessage="Por favor indica si ha realizado al menos un ciclo de auditoría interna"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Existe algún requerimiento estándar no aplicable a la organización? ¿Cuál es ese requerimiento?:"/>
                                            <p:spacer width="10"/> 
                                            <br/>
                                            <p:outputLabel style="font-size: x-small" value="Explique como el requerimiento no aplicable no afecta a la capacidad o responsabilidad
                                                           de la organización en la conformidad de sus productos y servicios."/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="estandarNoApli" value="#{perfilUser.perfilCertificacion.reqNoAplica}" 
                                                         required="true" requiredMessage="Por favor indica si existe algún requerimiento estándar no aplicable a la organización"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="Indique otras certificaciones, registros o asociaciones comerciales a las que pertenezca y que estén vigentes:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="otrasCert" value="#{perfilUser.perfilCertificacion.certificacionesVigentes}" />
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="¿Está utilizando los servicios de algún consultor? En caso afirmativo, mencione quién es:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="serviciosConsultor" value="#{perfilUser.perfilCertificacion.serviciosConsultor}" />
                                        </p:column> 
                                        <p:column>
                                            <p:outputLabel value="* Favor de indicar ¿cuándo tienen considerado llevar a cabo su certificación?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="certificacion" value="#{perfilUser.perfilCertificacion.fechaConsideraCert}" 
                                                         required="true" requiredMessage="Por favor indica cuándo tienen considerado llevar a cabo su certificación"/>
                                        </p:column>                                    
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <p:tab id="reqTrans" title="Transferencia" titleStyle="font-size: small;">                        
                        <p:panel header="Requerimientos para Transferencia">
                            <p:panel>
                                <p:outputLabel value="La Transferencia es cuando un cliente cambia de un organismo certificador a otro debidamente acreditado."/> 
                                <br/>
                                <p:outputLabel value="Mostrar información para editar datos de Transferencia (Si aplica): "/> 
                                <p:selectBooleanCheckbox value="#{perfilUser.aplicaTrans}">
                                    <p:ajax event="change" update="datos:opReqTrans"/>
                                </p:selectBooleanCheckbox>
                            </p:panel>
                            <br/>
                            <p:outputPanel id="opReqTrans" style="overflow: auto; height: 340px">
                                <p:messages />
                                <p:panelGrid id="pnlTrans" rendered="#{perfilUser.aplicaTrans}" columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Casa certificadora actual:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* Fecha de emisión y expiración del certificado actual:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:inputText id="casaCertAct" value="#{perfilUser.perfilTransferencia.casaCertActual}" 
                                                         required="true" requiredMessage="Por favor indica la casa certificadora actual"/>
                                        </p:column>
                                        <p:column>
                                            <p:inputMask id="emision" value="#{perfilUser.fechaEmi}" mask="99/99/9999" placeholder="Fecha de emisión"
                                                         required="true" requiredMessage="Por favor indica la fecha de emisión del certificado actual"/>
                                            <p:spacer width="10"/>
                                            <p:inputMask id="expiracion" value="#{perfilUser.fechaExp}" mask="99/99/9999" placeholder="Fecha de expiración"
                                                         required="true" requiredMessage="Por favor indica la fecha de expiración del certificado actual"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Favor de indicar su próximo evento de certificación:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene cerradas las no conformidades relativas a su útlima auditoría externa?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneRadio id="proxEvento" value="#{perfilUser.selectedCert}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica el próximo evento de certificación">
                                                <f:selectItems value="#{perfilUser.listaEvento}" 
                                                               var="c" itemLabel="#{c.descripcion}" 
                                                               itemValue="#{c.idEventoCertificacion}"/>
                                            </p:selectOneRadio>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="cerradasConf" value="#{perfilUser.perfilTransferencia.cerradasConf}" 
                                                         required="true" requiredMessage="Por favor indica si tiene cerradas las no conformidades relativas a su útlima auditoría externa"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* Favor de indicar cuál es su esquema de certificación:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene el último reporte de Auditoría practicada por la casa certificadora actual?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>                                            
                                            <p:selectOneRadio id="esquemaCert" value="#{perfilUser.selectedEsquema}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica cuál es su esquema de certificación">
                                                <f:selectItems value="#{perfilUser.listaEsquema}" 
                                                               var="d" itemLabel="#{d.descripcion}" 
                                                               itemValue="#{d.idEsquemaCertidicacion}"/>
                                                <p:ajax event="change" listener="#{perfilUser.llenaListaEventosCert}" update="eventoCert"/>
                                            </p:selectOneRadio>
                                        </p:column>
                                        <p:column>
                                            <p:inputText id="ultimoReporte" value="#{perfilUser.perfilTransferencia.ultimoReporte}" 
                                                         required="true" requiredMessage="Por favor indica si tiene el último reporte de Auditoría practicada por la casa certificadora actual"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:outputLabel value="* Favor de indicar ¿cuál es su próximo evento en la certificación?:"/>                                        
                                        </p:column>                                   
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:selectOneRadio id="eventoCert" value="#{perfilUser.selectedEventoCert}" layout="grid" columns="6"
                                                              required="true" requiredMessage="Por favor indica cuál es su próximo evento en la certificación">
                                                <f:selectItems value="#{perfilUser.listaEventosCert}" 
                                                               var="e" itemLabel="#{e.descripcion}" 
                                                               itemValue="#{e.idEventoCertificacion}"/>
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:outputLabel value="* Favor de indicar el número de días de auditoría y número de auditores aplicados a los eventos de auditoría
                                                           con su organismo actual:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="4">
                                            <p:inputText id="diasAuditoria" value="#{perfilUser.perfilTransferencia.numDiasAuditoria}" maxlength="2" placeholder="Días de auditoría"
                                                         required="true" requiredMessage="Por favor indica el número de días de auditoría aplicados a los eventos de auditoría"/>
                                            <p:spacer width="10"/>
                                            <p:inputText id="noAuditores" value="#{perfilUser.perfilTransferencia.numAuditores}" maxlength="2" placeholder="Número de auditores"
                                                         required="true" requiredMessage="Por favor indica el número de auditores aplicados a los eventos de auditoría"/>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <p:tab id="reqMultisitios" title="Multisitios" titleStyle="font-size: small;">
                        <p:panel header="Requerimientos para Organización Multisitios">
                            <p:panel>
                                <p:outputLabel value="Las organizaciones Multisitios son aquellas que cuentan con uno o más sitios remotos 
                                               y que hacen actividades iguales o complementarias a las que realiza la matriz."/> 
                                <br/>
                                <p:outputLabel value="Mostrar información para editar datos de Multisitios (Si aplica): "/> 
                                <p:selectBooleanCheckbox value="#{perfilUser.multisitios}">
                                    <p:ajax event="change" update="datos:opReqMult"/>
                                </p:selectBooleanCheckbox>
                            </p:panel>
                            <br/>
                            <p:outputPanel id="opReqMult" style="overflow: auto; height: 338px">
                                <p:messages id="messages"/>
                                <p:panelGrid rendered="#{perfilUser.multisitios}" columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">                                                                    
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene los mismos procesos en Matriz y Sitios Remotos?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene procesos complementarios entre Matriz y Sitios Remotos?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneRadio id="mismoMSR" value="#{perfilUser.perfilMultisitios.procesoIgual}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si tiene los mismos procesos en Matriz y Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneRadio id="complementoMSR" value="#{perfilUser.perfilMultisitios.procesoComplementario}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si tiene procesos complementarios entre Matriz y Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Tiene procesos complementarios entre Sitios Remotos?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Existen procesos independientes en Sitios Remotos?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneRadio id="complementoSR" value="#{perfilUser.perfilMultisitios.procesoComplementarioSr}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si tiene procesos complementarios entre Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneRadio id="independienteSR" value="#{perfilUser.perfilMultisitios.procesoIndependienteSr}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si existen procesos independientes en Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:outputLabel value="* ¿Ha tenido auditorías en Sitios Remotos?:"/>
                                        </p:column>
                                        <p:column>
                                            <p:outputLabel value="* ¿Ha tenido quejas de clientes en Sitios Remotos?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column>
                                            <p:selectOneRadio id="auditoriaSR" value="#{perfilUser.perfilMultisitios.auditoriaSr}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si ha tenido auditorías en Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                        <p:column>
                                            <p:selectOneRadio id="quejaSR" value="#{perfilUser.perfilMultisitios.quejaSr}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si ha tenido quejas de clientes en Sitios Remotos">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:outputLabel value="* ¿Tiene incluidos todos los Sitios Remotos en el Alcance de su SGC?:"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:selectOneRadio id="incluyeSRSGC" value="#{perfilUser.perfilMultisitios.inclusionSrAlcance}" layout="grid" columns="2"
                                                              required="true" requiredMessage="Por favor indica si tiene incluidos todos los Sitios Remotos en el Alcance de su SGC">
                                                <f:selectItem itemLabel="Sí" itemValue="1" />
                                                <f:selectItem itemLabel="No" itemValue="2" />
                                            </p:selectOneRadio>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:spacer height="10"/>
                                        </p:column>
                                    </p:row>
                                    <p:row>
                                        <p:column colspan="2">
                                            <p:outputLabel value="* Adjunte mapa de procesos de cada Sitio Remoto:"/>
                                        </p:column>
                                    </p:row>    
                                    <p:row>
                                        <p:column colspan="2">  
                                            <p:panel>
                                            <p:fileUpload value="#{perfilUser.nameFile}"
                                                          fileUploadListener="#{perfilUser.handleFileUpload}" mode="advanced" dragDropSupport="true"
                                                          cancelLabel="Cancelar" uploadLabel="Subir mapa de procesos" fileLimitMessage="Solo se permite subir máximo 3 archivos a la vez."
                                                          invalidFileMessage="Archivo con formato inválido. Solo se permiten archivos tipo jpg, png y/o pdf."
                                                          invalidSizeMessage="Solo se permiten cargar archivos de hasta 1 MB." label="Seleccionar"
                                                          required="true" requiredMessage="Por favor adjunte por lo menos un mapa de procesos para los sitios remotos"
                                                          update="messages archivosCarga" sizeLimit="1000000" fileLimit="3" allowTypes="/(\.|\/)(gif|jpe?g|png)$/" />
                                            <p:dataTable id="archivosCarga" var="archivoC" rowKey="#{archivoC.key}"
                                                         value="#{perfilUser.listaPerfilArchivos}"
                                                         emptyMessage="No se han cargado archivos de mapas de procesos."
                                                         style="text-align: center">
                                                <f:facet name="header">                                                    
                                                    Archivos cargados
                                                    <p:spacer width="10" height="25"/>
                                                </f:facet>
                                                <p:column headerText="Nombre del archivo">
                                                    <p:outputLabel value="#{archivoC.nombreArchivo}"/>
                                                </p:column>                                                
                                                <p:column headerText="Opciones">
                                                    <p:commandButton icon="ui-icon-close" title="Eliminar" action="#{perfilUser.eliminarArchivo}"
                                                                     update="datos:archivosCarga">
                                                        <f:setPropertyActionListener value="#{archivoC}" target="#{perfilUser.seleccionadoArchivo}"/>
                                                    </p:commandButton>
                                                    <p:spacer width="10" height="25"/>
                                                    <p:commandButton icon="ui-icon ui-icon-arrowthickstop-1-s" title="Descargar" 
                                                                     onclick="descarga('urlDescarga_#{archivoC.nombreArchivo}');" 
                                                                     type="button" id="descargarArchivo"
                                                                     rendered="#{perfilUser.aplicaPerfil}">
                                                        <p:ajax update="datos:archivosCarga"/>
                                                    </p:commandButton>
                                                    <a id="urlDescarga_#{archivoC.nombreArchivo}" href="#{perfilUser.destination}#{archivoC.nombreArchivo}"/>
                                                </p:column>
                                            </p:dataTable>
                                            </p:panel>
                                        </p:column>
                                    </p:row>
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                    <!--p:commandButton icon="ui-icon ui-icon-arrowthickstop-1-s" title="Descargar" 
                                                                     action="{perfilUser.descarga}"
                                                                     oncomplete="descarga('urlDescarga_{archivoC.nombreArchivo}');"
                                                                     type="button" id="descargarArchivo"
                                                                     rendered="{perfilUser.aplicaPerfil}">
                                                        <f:setPropertyActionListener value="{archivoC}" target="{perfilUser.seleccionadoArchivo}"/>
                                                        <p:ajax update="datos:archivosCarga"/>
                                                    </p:commandButton> 
                                                    <p:commandLink id="urlDescarga_{archivoC.nombreArchivo}">
                                                        <p:fileDownload value="{perfilUser.file}" />
                                                    </p:commandLink-->
                    <!--p:tab id="reqRemotos" title="Remotos" titleStyle="font-size: small;">                        
                        <p:panel header="Requerimientos para Sitios Remotos">
                            <p:panel>
                                <p:outputLabel value="Los Sitios Remotos son locaciones en los que se efectúan actividades del 
                                               cliente que son llevadas a cabo en un periodo finito, por ejemplo, constructoras."/> 
                                <br/>
                                <p:outputLabel value="Mostrar información para editar datos de Sitios Remotos (Si aplica): "/> 
                                <p:selectBooleanCheckbox value="{perfilUser.aplicaSRem}">
                                    <p:ajax event="change" update="datos:opReqSRem"/>
                                </p:selectBooleanCheckbox>
                            </p:panel>
                            <br/>
                            <p:outputPanel id="opReqSRem" style="overflow: auto; height: 340px">
                                <p:messages />
                                <p:panelGrid id="pnlSRem" rendered="{perfilUser.aplicaSRem}" columnClasses="label, value" styleClass="perfilGrid" style="width:99%;text-align: justify;">
                                    <p:row>
                                        <p:column>
                                            <p:dataTable id="sRem" var="remoto" rowKey="{remoto.key}"
                                                         value="{perfilUser.listaSRem}"
                                                         emptyMessage="No se han agregado multisitios."
                                                         style="text-align: center">
                                                <f:facet name="header">
                                                    <p:commandButton id="agregarMultisitios" title="Agregar sitios remotos"
                                                                     onclick="PF('bloqueo').show();" immediate="true"
                                                                     action="{perfilUser.agregarSRem}"
                                                                     oncomplete="PF('bloqueo').hide();"
                                                                     update="datos:opReqSRem"
                                                                     icon="fa fa-plus-square" style="float: left;"/>
                                                    Sitios Remotos 
                                                    <p:spacer width="10" height="25"/>
                                                </f:facet>
                                                <p:column headerText="Nombre y dirección">
                                                    <p:inputText value="{remoto.nombreDireccion}"/>
                                                </p:column>
                                                <p:column headerText="Total de empleados">
                                                    <p:inputText value="{remoto.totalEmpleados}"/>
                                                </p:column>
                                                <p:column headerText="Turnos">
                                                    <p:selectManyCheckbox value="{remoto.selectedTurnos}" layout="grid" columns="1">
                                                        <f:selectItems value="{remoto.listaTurnos}" var="turnos"/>
                                                    </p:selectManyCheckbox>
                                                </p:column>
                                                <p:column headerText="Opciones">
                                                    <p:commandButton icon="ui-icon-close" title="Eliminar" action="{perfilUser.eliminarSRem}"
                                                                     update="datos:sRem">
                                                        <f:setPropertyActionListener value="{remoto}" target="{perfilUser.seleccionadoSRem}"/>
                                                    </p:commandButton>
                                                </p:column>
                                            </p:dataTable>
                                        </p:column>
                                    </p:row>
                                    
                                </p:panelGrid>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab-->
                    <p:tab id="concluir" title="Concluir" titleStyle="font-size: small;" rendered="#{autentifica.empleado.idPerfil==3?'false':'true'}">
                        <p:panel header="Concluir Perfil de la organización">
                            <p:outputPanel id="opConcluir" style="height: 390px; text-align: justify; font-size: medium">                                
                                <p>
                                    Al presionar el botón de <b>"Concluir Perfil"</b> se enviará un correo electrónico para que la información 
                                    proporcionada sea revisada por INTERA. 
                                </p>
                                <p>
                                    Usted puede seguir consultando y actualizando la información las veces que sean necesarias, si desea 
                                    que el equipo de INTERA revise dichos cambios deberá siempre dar click en el botón de <b>"Concluir Perfil"</b>.
                                </p>
                                <p>
                                    Agradecemos el tiempo que se tomó al llenar la información del Perfil de la Organización, a la brevedad nos
                                    pondremos en contacto con usted para continuar con las etapas del proceso.
                                </p>
                                <br/><br/>
                                <p:commandButton icon="fa fa-check" value="Concluir Perfil" 
                                                 action="#{perfilUser.concluirPerfil}" onclick="PF('bloqueo').show();"
                                                 oncomplete="PF('bloqueo').hide();"/>
                            </p:outputPanel>
                        </p:panel>
                    </p:tab>
                </p:wizard>                
            </p:panel>              
            <p:blockUI block="datos" widgetVar="bloqueo">
                Procesando información, espere un momento por favor...<br/>
                <br/> 
                <p:graphicImage width="45" height="45" value="/Librerias/Imagenes/Base/loading.gif"/> 
            </p:blockUI>
            <script type="text/javascript">                
                function descarga(id){
                    document.getElementById(id).click();
                }
            </script>
        </h:form>
        <p:dialog header="Revisión de la solicitud" widgetVar="dlg" id="dlgObs" modal="true" height="450" width="800" rendered="#{perfilUser.aplicaPerfil}">
                <h:form>
                    <p:panel>
                    <br/>
                    <p:messages autoUpdate="true"/>
                    <p:panelGrid columns="2" styleClass="perfilGrid">                        
                        <p:outputLabel value="Código NACE:"/>
                        <p:inputText value="#{perfilUser.revisionSolicitud.codigoNace}" autocomplete="true" maxlength="50" size="50"
                                     required="true" requiredMessage="Por favor indica el código NACE."/>
                        <br/>
                    </p:panelGrid>
                    <p:panelGrid columns="1" styleClass="perfilGrid">
                        <p:outputLabel value="Se cuenta con la competencia y la capacidad para llevar a cabo la actividad de certificación
                                       incluidas la asignación del equipo auditor y personal que tomara decisiones sobre la certificación
                                       de acuerdo al código NACE indicado anteriormente, y en apego al Anexo 1 del procedimiento
                                       INTERA-PG-06 y a la Matriz de Asignación Técnica para revisión de solicitudes e informes de
                                       auditoría R8-PG-06." />
                        <p:selectOneRadio id="competencia" value="#{perfilUser.revisionSolicitud.competencia}"
                                          required="true" requiredMessage="Por favor indica si se cuenta con la competencia y la capacidad para llevar a cabo la actividad de certificación.">
                            <f:selectItem itemLabel="Cumple" itemValue="1" />
                            <f:selectItem itemLabel="No cumple" itemValue="2" />
                        </p:selectOneRadio>
                        <br/>
                        <p:outputLabel value="Se tiene en cuenta el alcance de la certificación solicitada, los sitios en donde la organización
                                       solicitante lleva a cabo sus operaciones incluidos sitios temporales o remotos (cuando aplique), el
                                       tiempo requerido para completar las auditorías (de acuerdo a lo indicado en el formato de
                                       cotización (R4-POP-01) y cualquier otro asunto que tenga influencia sobre la actividad de
                                       certificación (idioma, condiciones de seguridad, amenazas a la imparcialidad, etc.);" />
                        <p:selectOneRadio id="cuentaAlcance" value="#{perfilUser.revisionSolicitud.cuentaAlcance}"
                                          required="true" requiredMessage="Por favor indica si se cuenta con el alcance de la certificación solicitada.">
                            <f:selectItem itemLabel="Cumple" itemValue="1" />
                            <f:selectItem itemLabel="No cumple" itemValue="2" />
                        </p:selectOneRadio>
                        <br/>
                        <p:outputLabel value="La información relativa a la organización solicitante y a su sistema de gestión es suficiente para
                                       desarrollar un programa de auditoria de acuerdo a lo indicado en el presente registro." />
                        <p:selectOneRadio id="infoRelativa" value="#{perfilUser.revisionSolicitud.infoRelativa}"
                                          required="true" requiredMessage="Por favor indica si la información relativa a la organización solicitante y 
                                          a su sistema de gestión es suficiente para desarrollar la auditoría.">
                            <f:selectItem itemLabel="Cumple" itemValue="1" />
                            <f:selectItem itemLabel="No cumple" itemValue="2" />
                        </p:selectOneRadio>
                        <br/>
                        <p:outputLabel value="Se ha resuelto cualquier diferencia de entendimiento conocida, entre INTERA y la organización
                                       solicitante." />
                        <p:selectOneRadio id="resuelto" value="#{perfilUser.revisionSolicitud.diferencia}"
                                          required="true" requiredMessage="Por favor indica si se ha resuelto cualquier diferencia de entendimiento conocida, 
                                          entre INTERA y la organización solicitante.">
                            <f:selectItem itemLabel="Cumple" itemValue="1" />
                            <f:selectItem itemLabel="No cumple" itemValue="2" />
                        </p:selectOneRadio>
                        <br/>
                        <p:outputLabel value="Para proceder a la aprobación de la presente revisión de la solicitud se deben cumplir con los criterios descritos anteriormente,
                                       de lo contrario se notifica al solicitante de manera escrita las razones que originaron el rechazo a la solicitud de certificación." />
                        <p:selectOneRadio id="aprobacion" value="#{perfilUser.revisionSolicitud.aprobacion}"
                                          required="true" requiredMessage="Por favor indica si se ha aprobado la revisión de la solicitud.">
                            <f:selectItem itemLabel="Aprobado" itemValue="1" />
                            <f:selectItem itemLabel="No Aprobado" itemValue="2" />
                        </p:selectOneRadio>
                        <br/>                        
                    </p:panelGrid>
                    <p:panelGrid columns="2" styleClass="perfilGrid">
                        <p:outputLabel value="Nombre del personal competente:" />
                        <p:inputText id="personalComp" value="#{perfilUser.revisionSolicitud.personalCompetente}"
                                     required="true" requiredMessage="Por favor indica el nombre del personal competente."
                                     autocomplete="true" maxlength="50" size="50"/>
                    
                        <p:outputLabel value="Observaciones:" />
                        <p:inputTextarea id="obs" value="#{perfilUser.revisionSolicitud.obs}"
                                     maxlength="3000" cols="50"/>
                    </p:panelGrid>
                    <br/>
                    <p:commandButton id="guardaRev" icon="fa fa-floppy-o" value="Guardar" validateClient="true" 
                                     action="#{perfilUser.guardaRevision}" ajax="true"/>
                    
                    <br/><br/>                    
                    </p:panel>
                </h:form>
            </p:dialog>                  
    </h:body>
</html>
