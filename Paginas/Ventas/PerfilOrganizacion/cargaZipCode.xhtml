<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">    
    <h:head> 
        <h:outputStylesheet library="css" name="skins.css"/>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"></link>
    </h:head>
    <h:body>   
        <h:form id="datos">            
            <p:growl id="mensaje" showDetail="true"/>            
            <p:dataTable id="dtZipCode" widgetVar="wvZipCode" 
                         value="#{cargaZipCode.listaZipCode}" var="zipCode" filterEvent="enter"
                         filteredValue="#{cargaZipCode.filtroZipCode}" paginator="true" rows="10"
                         paginatorTemplate="{FirstPageLink} {PreviousPageLink} {CurrentPageReport} {NextPageLink} {LastPageLink}"
                         emptyMessage="No se encontraron registros con la búsqueda realizada.">
                <f:facet name="header">
                    <p:commandButton id="agregarZipCodes" value="Agregar Zip Code"
                                     onclick="PF('bloqueo').show();"
                                     action="#{cargaZipCode.agregaZipCode}"
                                     oncomplete="PF('bloqueo').hide();" update="datos:dtZipCode"
                                     icon="fa fa-plus-square" style="float: left;"
                                     rendered="#{cargaZipCode.autentifica.empleado.idPerfil==6 ? 'false' : 'true'}"/>                    
                    <p:spacer width="50" height="30"/> 
                    <p:outputPanel style="float: right;">
                        <h:outputText value="Búsqueda general:" />
                        <p:spacer width="10"/> 
                        <p:inputText id="globalFilter" onkeyup="PF('wvZipCode').filter();" style="width:150px" placeholder="Ingresa palabra clave"/>
                    </p:outputPanel>
                </f:facet> 
                <p:column style="width: 20px;" rendered="#{cargaZipCode.autentifica.empleado.idPerfil==6 ? 'true' : 'false'}">
                    <p:commandButton id="seleccionarZip" title="Seleccionar código postal"
                                     action="#{cargaZipCode.regresar}"
                                     icon="fa fa-check-circle">
                        <f:setPropertyActionListener value="#{zipCode}" target="#{cargaZipCode.seleccionado}" />
                    </p:commandButton>
                </p:column>
                <p:column headerText="Código Postal" filterBy="#{zipCode.codigoPostal}" filterMatchMode="contains">
                    <h:outputText value="#{zipCode.codigoPostal}"/>
                </p:column>
                <p:column headerText="Colonia" filterBy="#{zipCode.colonia}" filterMatchMode="contains">
                    <h:outputText value="#{zipCode.colonia}"/>
                </p:column>    
                <p:column headerText="Ciudad" filterBy="#{zipCode.claveCiudad} #{zipCode.ciudad}" filterMatchMode="contains">
                    <h:outputText value="#{zipCode.claveCiudad} - #{zipCode.ciudad}"/>
                </p:column> 
                <p:column headerText="Estado" filterBy="#{zipCode.claveEstado} #{zipCode.estado}" filterMatchMode="contains">
                    <h:outputText value="#{zipCode.claveEstado} - #{zipCode.estado}"/>
                </p:column>
                <p:column headerText="País" filterBy="#{zipCode.clavePais}" filterMatchMode="contains">
                    <h:outputText value="#{zipCode.clavePais}"/>
                </p:column>
                <f:facet name="footer">
                    <p:spacer height="20"/>
                </f:facet>
            </p:dataTable>
            <p:blockUI block="datos" widgetVar="bloqueo" trigger="datos:dtZipCode">
                Procesando información, espere un momento por favor...<br/>
                <br/> 
                <p:graphicImage width="45" height="45" value="/Librerias/Imagenes/Base/loading.gif"/> 
            </p:blockUI>
        </h:form>
    </h:body>
</html>