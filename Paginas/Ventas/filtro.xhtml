<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">    
    <h:head>
        <link href="#{facesContext.externalContext.requestContextPath}/Librerias/Estilos/skins.css" type="text/css" rel="stylesheet"/>
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet"></link>
        <title>TODO supply a title</title>        
    </h:head>
    <h:body>   
        <h:form id="datos">            
            <p:growl id="mensaje" showDetail="true"/>
            <p:dataTable id="dtPerfiles" 
                         value="#{ventasFiltro.listaPerfilDatosGenerales}" 
                         var="perfilGral" paginator="true" 
                         paginatorAlwaysVisible="false" rows="10" >
                <f:facet name="header">
                    <p:spacer width="10" height="10" />                    
                </f:facet>
                <p:column headerText="OrganizaciÃ³n" width="20%">
                    <h:outputText styleClass="fa fa-suitcase"/><p:spacer width="10"/><h:outputText value="#{perfilGral.nombreOrganizacion}"/>
                </p:column>
                <p:column headerText="Lugar de residencia" width="20%">
                    <h:outputText styleClass="fa fa-location-arrow"/><p:spacer width="10"/><h:outputText value="#{perfilGral.pais}"/><br/>  
                    <p:spacer width="20" height="5"/><h:outputText value="#{perfilGral.estado}"/><br/> 
                    <p:spacer width="20" height="5"/><h:outputText value="#{perfilGral.ciudad}"/>
                </p:column>
                <p:column headerText="Domicilio" width="25%">
                    <h:outputText styleClass="fa fa-home"/><p:spacer width="10"/><h:outputText value="#{perfilGral.calle} #{perfilGral.numero}"/><br/>  
                    <p:spacer width="20" height="5"/><h:outputText value="#{perfilGral.colonia}"/><br/> 
                    <p:spacer width="20" height="5"/><h:outputText value="C.P. #{perfilGral.cp}"/>
                </p:column>
                <p:column headerText="Contacto para referencias" width="25%">
                    <h:outputText styleClass="fa fa-user"/><p:spacer width="10"/><h:outputText value="#{perfilGral.contacto1}"/><br/>
                    <h:outputText styleClass="fa fa-envelope-o"/><p:spacer width="8"/><h:outputText value="#{perfilGral.email1}"/><br/>
                    <h:outputText styleClass="fa fa-phone"/><p:spacer width="10"/><h:outputText value="TEL. #{perfilGral.telefono}"/>
                </p:column>
                <p:column headerText="Opciones" width="10%" style="text-align: center">
                    <p:commandLink title="Generar perfil" actionListener="#{ventasFiltro.abreDialog}"
                                   onclick="PF('blockVisualizador').show();" >
                        <h:graphicImage url="/Librerias/Imagenes/Iconos/archivoPDF.png" />
                        <f:setPropertyActionListener value="#{perfilGral}" target="#{ventasFiltro.seleccionado}" />
                    </p:commandLink>
                </p:column>
            </p:dataTable>

            <p:dialog header="Perfil de la empresa" height="520" width="700"
                      widgetVar="dialogWV" onShow="leerPdf();" modal="true">
                <p:panel id="visualizador" style="border: none;">
                    <object type="application/pdf" data="#{ventasFiltro.rutaArchivo}" height="495px" width="100%" internalinstanceid="5"/>
                </p:panel>                
            </p:dialog>
            <p:remoteCommand id="rcPdf" name="leerPdf" update="visualizador"                             
                             oncomplete="PF('blockVisualizador').hide();"
                             actionListener="#{ventasFiltro.generarPerfilPdf}"/>
            <p:blockUI widgetVar="blockVisualizador" block="visualizador">
                Generando perfil de la empresa, espere un momento por favor...<br/>
                <br/> 
                <p:graphicImage value="/Librerias/Imagenes/ajax-loading-bar.gif"/> 
            </p:blockUI>
        </h:form>
    </h:body>
</html>